{% extends 'base_admin.html' %}

{% block title %}Insertar Persona{% endblock %}

{% block head %}

{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/modificar_veterano.css') }}">

{% endblock %}

{% block content %}

<div class="container-fluid px-3">
    <h1 class="h2 mb-3">Insertar Persona</h1>
    <p class="text-muted">Complete el formulario con los datos del veterano (los campos con * son obligatorios).</p>
    <hr class="my-4">

    <form class="formulario" method="POST" enctype="multipart/form-data" action="{{ url_for('main.insertar_persona') }}">

        <section>
            <h3 class="h4">Información personal</h3>
            <div class="grid">
                <div>
                    <label>DNI*</label>
                    <input type="text" name="dni" required placeholder="Ej: 12345678">
                </div>
                <div>
                    <label>Nombre*</label>
                    <input type="text" name="nombre" required placeholder="Ej: Juan Carlos">
                </div>
                <div>
                    <label>Apellido*</label>
                    <input type="text" name="apellido" required placeholder="Ej: Pérez">
                </div>
                <div>
                    <label>Género</label>
                    <select name="genero">
                        <option value="no especificado" selected>No especificado</option>
                        <option value="masculino">Masculino</option>
                        <option value="femenino">Femenino</option>
                        <option value="otro">Otro</option>
                    </select>
                </div>
                <div>
                    <label>Fecha de nacimiento*</label>
                    <input type="date" name="fecha_nacimiento" id="fecha_nacimiento" required>
                </div>
                <div>
                    <label>Edad</label>
                    <input type="text" id="edad" disabled placeholder="Calculado automáticamente">
                </div>
                <div>
                    <label>Provincia de nacimiento</label>
                    <select name="provincia_nacimiento" id="provincia_nacimiento">
                        <option value="">Seleccione una provincia</option>
                        {% for provincia in provincias %}
                        <option value="{{ provincia.id_provincia }}">{{ provincia.nombre }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div>
                    <label>Localidad de nacimiento</label>
                    <select name="localidad_nacimiento" id="localidad_nacimiento" disabled>
                        <option value="">Seleccione una localidad</option>
                    </select>
                </div>
                 <div>
                    <label>Foto/s</label>
                    <input type="file" class="form-control" id="fotos" name="fotos" multiple accept="image/*" style="padding: 8px; border: 1px solid #ccc; border-radius: 4px; line-height: 1.5;">
                </div>
            </div>
        </section>

        <section>
            <h3 class="h4">Información de contacto</h3>
            <div class="grid">
                <div>
                    <label>Provincia de residencia</label>
                    <select name="provincia_residencia" id="provincia_residencia">
                        <option value="">Seleccione una provincia</option>
                        {% for provincia in provincias %}
                        <option value="{{ provincia.id_provincia }}">{{ provincia.nombre }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div>
                    <label>Localidad de residencia</label>
                    <select name="localidad_residencia" id="localidad_residencia" disabled>
                        <option value="">Seleccione una localidad</option>
                    </select>
                </div>
                <div>
                    <label>Dirección postal</label>
                    <input type="text" name="direccion" placeholder="Ej: Av. Sabattini 2750">
                </div>
                <div>
                    <label>Código postal</label>
                    <select name="codigo_postal_residencia" id="codigo_postal" disabled>
                        <option value="">Seleccione un código postal</option>
                    </select>
                    <input type="text" id="otro_codigo_postal" name="otro_codigo_postal" 
                        style="display:none; margin-top:5px;" 
                        placeholder="Ingrese código postal">
                </div>
                <div>
                    <label>Correo electrónico</label>
                    <input type="email" name="mail" placeholder="Ej: ejemplo@mail.com">
                </div>
                <div>
                    <label>Teléfono</label>
                    <input type="tel" name="telefono" placeholder="Ej: 0358-1234567">
                </div>
            </div>
        </section>

        <section>
            <h3 class="h4">Información militar</h3>
            <div class="grid">
                <div>
                    <label>Fuerza*</label>
                    <select name="fuerza" id="fuerza" required>
                        <option value="">Seleccione una fuerza</option>
                        {% for fuerza in fuerzas %}
                        <option value="{{ fuerza.id_fuerza }}">{{ fuerza.nombre }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div>
                    <label>Grado</label>
                    <select name="grado" id="grado" disabled>
                        <option value="">Seleccione un grado</option>
                        <option value="otro">Otro</option>
                    </select>
                    <input type="text" id="otro_grado" name="otro_grado" style="display: none; margin-top: 5px;" placeholder="Ingrese el grado">
                </div>
                <div>
                    <label>Función</label>
                    <input type="text" name="funcion" placeholder="Ej: Soldado de infantería">
                </div>
                <div>
                    <label>Secuelas</label>
                    <input type="text" name="secuelas" placeholder="Ej: Pérdida auditiva parcial">
                </div>
                <div>
                    <label>Número de Beneficio Nacional</label>
                    <input type="text" name="nro_beneficio_nacional" placeholder="Ej: 12345">
                </div>
            </div>
        </section>

        <section>
            <h3 class="h4">Estado</h3>
            <div class="grid">
                <div class="estado">
                    <label>Estado de vida*:</label>
                    <div class="radio-group">
                        <label>
                            <input type="radio" name="estado_vida" id="vivo" value="vivo" checked> Vive
                        </label>
                        <label>
                            <input type="radio" name="estado_vida" id="fallecido" value="fallecido"> Fallecido
                        </label>
                    </div>
                </div>
                <div class="estado" id="fecha_fallecido" style="display: none;">
                    <label>Fecha de fallecimiento</label> <input type="date" name="fecha_fallecimiento">
                </div>
                <div id="causa_fallecido" class="estado" style="display: none;">
                    <label>Causa de fallecimiento</label>
                    <select name="causa_fallecimiento">
                        <option value="">Seleccione una causa</option>
                        {% for causa in causas %} 
                            <option value="{{ causa.id_causa }}">{{ causa.descripcion }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </section>

        <div class="acciones">
            <button type="button" class="cancelar">Cancelar</button>
            <button type="submit" class="guardar">Guardar</button>
        </div>
    </form>
</div>

<script>
    // Inyecta los datos necesarios para el script externo
    window.APP_DATA = {
        grados: {{ grados | tojson | safe }}
    };
</script>
<script src="{{ url_for('static', filename='js/form_veterano.js') }}"></script>

{% endblock %}